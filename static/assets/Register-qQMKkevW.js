import{G as n,j as t,H as m,J as l,ap as c,A as u}from"./index-Cx9aHWms.js";import{A as d}from"./AlreadyHaveAccount-DHEPUX3t.js";import{I as p}from"./IconInfiniteLoading-BhfJWl73.js";import"./antd-bK47dtYc.js";import{u as f,X as x,F as g,a as h,S as R}from"./formik.esm-ADxEa5mi.js";import"./types-CKSFNBik.js";import{A as j}from"./AuthEmailInput-D-YlC4Gb.js";import{A as i}from"./AuthPasswordInput-e_2fnOLH.js";import{u as w}from"./useMutation-D6aZmw1J.js";import"./react-day-picker-BMg2DGmo.js";import"./cn-Bz47sbbS.js";const I=n.object({name:n.string().trim().min(1,"Required field"),email:n.string().trim().min(1,"Required field").email("Invalid email format"),password:n.string().trim().min(1,"Required field"),passwordRepeat:n.string().trim().min(1,"Required field")}),A=()=>{const s=f();return t.jsx(x,{className:"w-[220px]",placeholder:"Name",name:"name",value:s.values.name,onChange:s.handleChange,error:s.touched.name&&!!s.errors.name,errorMessage:s.errors.name})},E=async s=>{const a="http://localhost:8008/kzen/",r="022569013";try{return await m.post(`${a}register`,{credentials:"include",json:s.formData,method:"POST",headers:{"x-api-key":r,"Content-Type":"application/json"}}).json()}catch(e){return await l(e)}},S=()=>{const s=c(),a=w({mutationFn:({formData:e})=>E({formData:e})});return{onSubmit:(e,o)=>{a.mutate({formData:e},{onError:()=>{},onSuccess:()=>{o.resetForm(),s(`/${u.ACTIVATE_PENDING_REGISTERED_USER}?email=${e.email}`)},onSettled:()=>{o.setSubmitting(!1)}})}}},N=()=>({validate:a=>{const r=I.safeParse(a),e={};if(!r.success)for(const o of r.error.issues)e[o.path[0]]=o.message;return a.email.length||(e.email="Required field"),a.password!==a.passwordRepeat&&(e.password="Passwords do not match",e.passwordRepeat="Passwords do not match"),e}}),y=()=>({initialValues:{email:"",password:"",passwordRepeat:"",name:""}}),O=()=>{const{onSubmit:s}=S(),{validate:a}=N(),{initialValues:r}=y();return t.jsx("div",{className:"flex flex-col gap-10 mt-10 items-center",children:t.jsx(g,{initialValues:r,validate:a,onSubmit:s,children:({isSubmitting:e})=>t.jsxs(h,{className:"flex flex-col gap-5",children:[t.jsx(A,{}),t.jsx(j,{}),t.jsx(i,{}),t.jsx(i,{repeatType:!0}),t.jsx(R,{className:"w-full",type:"submit",disabled:e,startIcon:e&&t.jsx(p,{className:"text-slate-500 w-5 h-5"}),children:e?"Registering...":"Register"}),t.jsx(d,{})]})})})};export{O as default};
//# sourceMappingURL=Register-qQMKkevW.js.map
