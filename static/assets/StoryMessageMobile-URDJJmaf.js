import{o as m,j as e,u as f,b2 as h}from"./index-Cx9aHWms.js";import{X as y,e as M}from"./XTiptap-Ch2jQgok.js";import{u as x,a as S,b as j}from"./StoryMakerIndex-D8sxgPvi.js";import{c as v}from"./index--O-lbexr.js";import{f as b}from"./date.helpers-BWySBUrV.js";import{r as g}from"./antd-bK47dtYc.js";import{a as w}from"./StoriesIndex-Dkg1SUFS.js";import{j as I,n as D,C as N}from"./ProtectedRoutes-BInEfiaw.js";import{S as d}from"./formik.esm-ADxEa5mi.js";import{u as C}from"./useDeleteStoryMessage-DB_NrQ5L.js";import{X as T}from"./XMobileMenu-BWyIqEbF.js";import{h as z}from"./react-day-picker-BMg2DGmo.js";import"./XSkeleton-x0yqnB_E.js";import"./cn-Bz47sbbS.js";import"./useMutation-D6aZmw1J.js";import"./useMatchMedia.hook-CVR6FWmx.js";import"./IconNew-BhAnMb5r.js";import"./IconSearch-CPJHC6Kt.js";import"./debounce-CqMFxJgi.js";import"./types-8-lvdrKU.js";import"./IconHeart-CwlJhkiG.js";import"./XTooltip-Bdc9vu0b.js";const F=m(({openDrawer:t,onClose:r,message:o})=>{const{onChangeField:s,editSelectedMessageId:n}=x(),{deleteStoryMessage:l}=C(),a=o.id===n;return e.jsx(T,{title:null,onClose:r,open:t,height:"230px",children:e.jsxs("div",{className:"flex flex-col h-[100px] gap-4",children:[e.jsx(d,{className:"!w-full !py-5 !h-0",onClick:()=>{s("editSelectedMessageId",a?void 0:o.id),r()},variant:"text",size:"small",startIcon:e.jsx(I,{width:24,height:24}),children:e.jsx("span",{className:"flex w-full justify-start capitalize",children:a?"Save":"Edit"})}),e.jsx(d,{className:"!w-full !py-5 !h-0",onClick:()=>{l({id:o.id}),r()},variant:"text",size:"small",startIcon:e.jsx(D,{width:24,height:24}),children:e.jsx("span",{className:"flex w-full justify-start capitalize",children:"Delete"})})]})})}),ee=m(({message:t})=>{var p,u;const r=f(),{onChangeField:o,editSelectedMessageId:s}=x(),{updateStoryMessage:n}=S(),{id:l}=j(),[a,c]=g.useState(!1);return t.description?e.jsxs(e.Fragment,{children:[e.jsxs("div",{onContextMenu:i=>i.preventDefault(),className:"relative group px-2 py-4 duration-300 border-b-solid border-transparent hover:border-blue-500/10",children:[e.jsxs("div",{className:"text-xs opacity-0 duration-300 group-hover:opacity-80 top-0 absolute  font-semibold font-kzen cursor-default text-cText",children:[z(b(new Date(t.updated_at)),"dd MMMM yyyy HH:mm"),((p=t.updated_by_user)==null?void 0:p.name)&&` by ${(u=t.updated_by_user)==null?void 0:u.name}`]}),e.jsx("span",{className:"absolute top-[-8px] right-0 opacity-0 group-hover:opacity-80 duration-300",children:e.jsx(d,{onClick:()=>c(!0),variant:"text",size:"small",startIcon:e.jsx(N,{className:"h-4 w-4"})})}),e.jsx(y,{showSaveButtonTooltip:!1,onSave:({html:i})=>{if(!M(i).trim().length){h("Type something");return}n({description:i,id:v(t.id),onSuccess:()=>{o("editSelectedMessageId",void 0),r.invalidateQueries({queryKey:w.useFetchStoryMessages(l)})}})},readonly:t.id!==s,content:t.description,customToolbar:t.id===s})]}),e.jsx(F,{message:t,openDrawer:a,onClose:()=>c(!1)})]}):null});export{ee as default};
//# sourceMappingURL=StoryMessageMobile-URDJJmaf.js.map
