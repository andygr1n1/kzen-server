const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/GoalEditorDialog-7j-ajjhY.js","assets/index-Cx9aHWms.js","assets/antd-bK47dtYc.js","assets/react-day-picker-BMg2DGmo.js","assets/index-DY_qxQT6.css","assets/ProtectedRoutes-BInEfiaw.js","assets/formik.esm-ADxEa5mi.js","assets/cn-Bz47sbbS.js","assets/formik-CkMvMzHs.css","assets/useMatchMedia.hook-CVR6FWmx.js","assets/useMutation-D6aZmw1J.js","assets/ProtectedRoutes-Dix7VhZk.css","assets/goalsFilterParamLocalForage-C8Yya3Ix.js","assets/IconNew-BhAnMb5r.js","assets/types-BpX3pQkR.js","assets/date.helpers-BWySBUrV.js","assets/IconEye-DfyAN8Gq.js","assets/XTooltip-Bdc9vu0b.js","assets/IconHeart-CwlJhkiG.js","assets/IconCheck-DtfZ8jdC.js","assets/debounce-CqMFxJgi.js"])))=>i.map(i=>d[i]);
import{aF as A,G as p,u as k,j as e,M as N,a9 as b,o as j,ap as R,aG as _,_ as P,R as O,a as w,N as X}from"./index-Cx9aHWms.js";import{r as c,e as L}from"./antd-bK47dtYc.js";import{u as T,a as $,F as q,I as S,b as F,X as Q,c as B,d as u,M as J}from"./ProtectedRoutes-BInEfiaw.js";import{g as K,a as V}from"./types-BpX3pQkR.js";import{u as W,T as Y,a as H,i as U,b as Z,I as G,s as ee,g as te}from"./goalsFilterParamLocalForage-C8Yya3Ix.js";import{u as se,i as ae,a as re,b as ie,c as le,d as ne,I as z,e as oe}from"./IconSearch-CPJHC6Kt.js";import{c as I}from"./date.helpers-BWySBUrV.js";import{h as y}from"./react-day-picker-BMg2DGmo.js";import{d as ce}from"./debounce-CqMFxJgi.js";import{I as xe}from"./IsLoading-DkFGnnOj.js";import{I as ue,a as E}from"./IconNew-BhAnMb5r.js";import{S as o,X as de}from"./formik.esm-ADxEa5mi.js";import{g as me}from"./IconCheck-DtfZ8jdC.js";import{I as M}from"./IconCompleted-DSq5ft7K.js";import{c as he}from"./cn-Bz47sbbS.js";import"./useMatchMedia.hook-CVR6FWmx.js";import"./useMutation-D6aZmw1J.js";import"./IconEye-DfyAN8Gq.js";import"./XTooltip-Bdc9vu0b.js";import"./IconHeart-CwlJhkiG.js";import"./IconInfiniteLoading-BhfJWl73.js";const pe=(t=[])=>({timeFrame:A(T(t.map(l=>l.finished_at&&y(I(l.finished_at),"yyyy MMMM")))),filteredGoals:l=>t.filter(r=>r.finished_at&&y(I(r.finished_at),"yyyy MMMM")===l)}),fe=t=>{switch(t){case"January":return 1;case"February":return 2;case"March":return 3;case"April":return 4;case"May":return 5;case"June":return 6;case"July":return 7;case"August":return 8;case"September":return 9;case"October":return 10;case"November":return 11;case"December":return 12;default:return 1}},f=()=>["KEY_useGoalsFiltersStore"];p.object({searchInput:p.string(),serverSearchInput:p.string(),status:K});const C=()=>{const t=k(),{data:s}=$({queryKey:f(),staleTime:1/0,refetchOnWindowFocus:!1,refetchOnMount:!1,initialData:{searchInput:"",serverSearchInput:"",status:V.active}}),a=c.useMemo(()=>ce(i=>{t.setQueryData(f(),{...s,serverSearchInput:i.target.value,searchInput:i.target.value})},1e3),[]),l=i=>{t.setQueryData(f(),{...s,searchInput:i.target.value}),a(i)},r=s.serverSearchInput,n=s.searchInput;return{store:s,serverSearchInput:r,onChange:l,onChangeServerSearchInput:a,searchInput:n}},je=({queryFilter:t})=>{const{serverSearchInput:s}=C(),{isLoading:a,goals:l,fetchNextPage:r,hasNextPage:n}=W({queryFilter:t,limit:20,serverSearchInput:s}),{ref:i,inView:d}=se();c.useEffect(()=>{d&&n&&r()},[d,n]);const{filteredGoals:h,timeFrame:m}=pe(l);return e.jsxs("div",{className:"animate-opacity-3 mx-auto flex w-full flex-col gap-5",children:[m.map(x=>{const g=h(x);return g.length?e.jsxs(L.Fragment,{children:[e.jsx("div",{children:x&&e.jsx(q,{title:x})}),x&&e.jsx("div",{className:"bg-global-2-bg-plasma animate-opacity-5 relative",children:e.jsx("img",{loading:"lazy",title:x,src:`/img/seasons/${fe(x.split(" ")[1])}.png`,className:"rounded-md animate-opacity-5 z-1 z-10 flex w-full items-center justify-center"})}),e.jsx("div",{className:"flex flex-col gap-5",children:g.map(v=>e.jsx(Y,{zIndex:2e3,goal:v,className:"mx-auto min-h-[60px] !w-full !flex-[100%]"},v.id))})]},x):null}),e.jsx("div",{ref:i,className:"flex relative w-full min-h-[100px] justify-center",children:e.jsx(xe,{isLoading:a})})]})},ge=()=>{const{setStore:t}=H(),s=()=>{t({goalEditorMode:me.new,goalId:null,open:!0})};return e.jsx("div",{className:"opacity-70",children:e.jsx(o,{startIcon:e.jsx(ue,{width:24,height:24}),onClick:s,className:"",variant:"text",children:"Add goal"})})},D=()=>{var m;const s=(m=N().state)==null?void 0:m.filter,a=ae(s),l=U(s),r=Z(s),n=re(s),i=ie(s),d=le(s),h=ne(s);return{paramFilter:s,isExpired:l,isActive:a,isRitualized:r,isFavorite:n,isCompleted:i,isDeleted:d,isAll:h}},ve=()=>{const{isExpired:t,isFavorite:s,isDeleted:a,isCompleted:l,isRitualized:r,isAll:n}=D();let i=e.jsx(S,{width:24,height:24,className:"min-h-[24px] min-w-[24px]"});return n&&(i=e.jsx(z,{width:24,height:24,className:"min-h-[24px] min-w-[24px] text-sky-400"})),t&&(i=e.jsx(b,{width:24,height:24,className:"min-h-[24px] min-w-[24px] text-amber-600"})),r&&(i=e.jsx(G,{width:24,height:24,className:"min-h-[24px] min-w-[24px] text-teal-600"})),s&&(i=e.jsx(F,{width:24,height:24,className:"min-h-[24px] min-w-[24px] text-rose-600"})),l&&(i=e.jsx(M,{width:24,height:24,className:"min-h-[24px] min-w-[24px] text-violet-600"})),a&&(i=e.jsx(E,{width:24,height:24,className:"min-h-[24px] min-w-[24px] text-slate-600"})),i},we=j(()=>{const{isExpired:t,isFavorite:s,isDeleted:a,isCompleted:l,isRitualized:r,isAll:n}=D();return e.jsx(o,{startIcon:e.jsx(ve,{}),className:he("!border-blue-600 hover:!bg-blue-600/20",n&&"!border-sky-400/20 hover:!bg-sky-400/20",t&&"!border-amber-500/20 hover:!bg-amber-500/20",s&&"!border-rose-500/20 hover:!bg-rose-500/20",r&&"!border-teal-500/20 hover:!bg-teal-500/20",l&&"!border-violet-500/20 hover:!bg-violet-500/20",a&&"!border-slate-500/20 hover:!bg-slate-500/20"),variant:"outlined"})}),Ie=j(()=>{const[t,s]=c.useState(!1),a=R(),l=r=>{ee(r),a({pathname:"/goals/filtered-goals",search:`?filter=${r}`},{state:{filter:r}}),s(!1)};return e.jsx(Q,{onOpenChange:r=>{s(r)},trigger:["hover"],open:t,dropdownRender:()=>e.jsx(ye,{onClose:l}),placement:"bottomRight",overlayClassName:"!z-[55]",children:e.jsx("div",{children:e.jsx(we,{})})})}),ye=j(({onClose:t})=>e.jsxs(B,{children:[e.jsx(u,{onClick:()=>{t("active")},children:e.jsx(o,{variant:"text",size:"small",startIcon:e.jsx(S,{className:"text-blue-500",width:24,height:24}),children:e.jsx("span",{className:"flex w-[110px] justify-start capitalize text-blue-500",children:"Active"})})}),e.jsx(u,{onClick:()=>{t("favorite")},children:e.jsx(o,{variant:"text",size:"small",startIcon:e.jsx(F,{className:"text-rose-500",width:24,height:24}),children:e.jsx("span",{className:"flex w-[110px] justify-start capitalize text-rose-500",children:"Favorite"})})}),e.jsx(u,{onClick:()=>{t("ritual")},children:e.jsx(o,{variant:"text",size:"small",startIcon:e.jsx(G,{className:"text-teal-500",width:24,height:24}),children:e.jsx("span",{className:"flex w-[110px] justify-start capitalize text-teal-500",children:"Ritualized"})})}),e.jsx(u,{onClick:()=>{t("expired")},children:e.jsx(o,{variant:"text",size:"small",startIcon:e.jsx(b,{className:"text-amber-500",width:24,height:24}),children:e.jsx("span",{className:"flex w-[110px] justify-start capitalize text-amber-500",children:"Expired"})})}),e.jsx(u,{onClick:()=>{t("completed")},children:e.jsx(o,{variant:"text",size:"small",startIcon:e.jsx(M,{className:"text-violet-500",width:24,height:24}),children:e.jsx("span",{className:"flex w-[110px] justify-start capitalize text-violet-500",children:"Completed"})})}),e.jsx(u,{onClick:()=>{t("deleted")},children:e.jsx(o,{variant:"text",size:"small",startIcon:e.jsx(E,{className:"text-slate-500",width:24,height:24}),children:e.jsx("span",{className:"flex w-[110px] justify-start capitalize text-slate-500",children:"Deleted"})})}),e.jsx(u,{onClick:()=>{t(_.all)},children:e.jsx(o,{variant:"text",size:"small",startIcon:e.jsx(z,{className:"text-sky-400",width:26,height:26}),children:e.jsx("span",{className:"flex w-[110px] justify-start capitalize text-sky-400",children:"All"})})})]})),Ne=()=>{const{store:t,onChange:s,onChangeServerSearchInput:a}=C();return c.useEffect(()=>()=>{a.cancel()},[]),e.jsx(de,{type:"text",autoFocus:!1,value:t.searchInput,onChange:s,startIcon:e.jsx(oe,{className:"text-slate-500/50",width:20,height:20}),placeholder:"Search",width:"!max-w-[600px] !w-full"})},be=()=>e.jsx("div",{className:"flex w-full mx-auto gap-8",children:e.jsxs("div",{className:"flex flex-col w-full gap-4",children:[e.jsx(ge,{}),e.jsxs("div",{className:"flex w-full items-center justify-end gap-2",children:[e.jsx(Ne,{}),e.jsx("div",{className:"flex gap-2 w-[108px]",children:e.jsx(Ie,{})})]})]})}),Se=c.lazy(()=>P(()=>import("./GoalEditorDialog-7j-ajjhY.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20]))),Fe=()=>{var a;const s=(a=N().state)==null?void 0:a.filter;return e.jsxs(J,{children:[e.jsx(c.Suspense,{fallback:null,children:e.jsx(Se,{})}),e.jsxs("div",{className:"flex flex-col gap-10 w-full max-w-[600px] mx-auto relative",children:[e.jsx(be,{}),e.jsx(je,{queryFilter:s},s)]})]})},Ge=()=>{const[t,s]=c.useState(null);return c.useEffect(()=>{(async()=>{const a=await te();s(a||"active")})()},[]),{filter:t}},We=()=>{const{filter:t}=Ge();return t?e.jsxs(O,{children:[e.jsx(w,{path:"/",element:e.jsx(X,{to:`/goals/filtered-goals?filter=${t}`,state:{filter:`${t}`}})}),e.jsx(w,{path:"filtered-goals",element:e.jsx(Fe,{})})]}):null};export{We as default};
//# sourceMappingURL=GoalsCmsIndex-DZZrWgDY.js.map
