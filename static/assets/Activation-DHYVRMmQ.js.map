{"version":3,"file":"Activation-DHYVRMmQ.js","sources":["../../src/modules/auth/activation/service/types.ts","../../src/modules/auth/activation/service/server_verifyActivationCode.ts","../../src/modules/auth/activation/hooks/useActivation.ts","../../src/modules/auth/activation/Activation.tsx"],"sourcesContent":["import { z } from 'zod'\n\nexport const verifyActivationCode = z.object({\n    message: z.string().optional(),\n    sessionInfo: z.object({ accessJWT: z.string() }),\n})\n\nexport type IVerifyActivationCode = z.infer<typeof verifyActivationCode>\n","import ky from 'ky'\nimport { type IVerifyActivationCode } from './types'\nimport { resolveError } from '@/helpers/tryCatchRequest'\n\nexport const server_verifyActivationCode = async (props: {\n    activationCode?: string | null\n}): Promise<IVerifyActivationCode | undefined> => {\n    const endpoint = import.meta.env['VITE_NODE_HEROKU_ORIGIN']\n    const xapikey = import.meta.env['VITE_X_API_KEY']\n    try {\n        const res = await ky\n            .post(`${endpoint}register/validate-activation-code`, {\n                credentials: 'include',\n                json: { activationCode: props.activationCode },\n                method: 'POST',\n                headers: {\n                    'x-api-key': xapikey,\n                    'Content-Type': 'application/json',\n                },\n            })\n            .json<IVerifyActivationCode>()\n\n        return res\n    } catch (error) {\n        await resolveError(error)\n        return\n    }\n}\n","import { useMutation } from '@tanstack/react-query'\n\nimport { processError, notifySuccess } from '@/helpers/processMessage'\nimport { server_verifyActivationCode } from '../service/server_verifyActivationCode'\nimport { getParam_Activation } from '@/helpers/urlSearchParams'\nimport { useNavigate } from 'react-router'\nimport { APP_ROUTES_ENUM } from '@/services/enums'\nimport { useEffect } from 'react'\n\nexport const useActivation = () => {\n    const navigate = useNavigate()\n\n    const mutation = useMutation({\n        mutationFn: ({ activationCode }: { activationCode?: string | null }) =>\n            server_verifyActivationCode({ activationCode }),\n        onError: (error) => {\n            processError(error.message)\n        },\n        onSuccess: () => {\n            notifySuccess(`Welcome to Kzen`)\n            //TODO autologin\n        },\n        onSettled: () => {\n            navigate(`/${APP_ROUTES_ENUM.LOGIN}`, { replace: true })\n        },\n    })\n\n    const activationCode = getParam_Activation()\n\n    useEffect(() => {\n        mutation.mutate({ activationCode })\n    }, [])\n}\n","import { IconInfiniteLoading } from '@/assets/icons'\nimport { useActivation } from './hooks/useActivation'\n\nconst Activation: React.FC = () => {\n    useActivation()\n\n    return (\n        <div className='px-5 text-sm font-inter relative h-full'>\n            <IconInfiniteLoading className='absolute-center text-blue-500 w-10 h-10 animate-pulse' />\n        </div>\n    )\n}\n\nexport default Activation\n"],"names":["z","object","message","string","optional","sessionInfo","accessJWT","server_verifyActivationCode","props","endpoint","import","xapikey","res","ky","post","credentials","json","activationCode","method","headers","error","resolveError","useActivation","navigate","useNavigate","mutation","useMutation","mutationFn","onError","processError","onSuccess","notifySuccess","onSettled","APP_ROUTES_ENUM","LOGIN","replace","getParam_Activation","useEffect","mutate","Activation","jsx","IconInfiniteLoading"],"mappings":"qRAEoCA,EAAEC,OAAO,CACzCC,QAASF,EAAEG,OAAO,EAAEC,SAAS,EAC7BC,YAAaL,EAAEC,OAAO,CAAEK,UAAWN,EAAEG,OAAO,CAAG,CAAA,CACnD,CAAC,ECDYI,MAAAA,EAA8B,MAAOC,GAEA,CACxCC,MAAAA,EAAWC,8BACXC,EAAUD,YACZ,GAAA,CAaOE,OAZK,MAAMC,EACbC,KAAM,GAAEL,CAAS,oCAAoC,CAClDM,YAAa,UACbC,KAAM,CAAEC,eAAgBT,EAAMS,cAAe,EAC7CC,OAAQ,OACRC,QAAS,CACL,YAAaR,EACb,eAAgB,kBAAA,CAEvB,CAAA,EACAK,KAA4B,QAG5BI,EAAO,CACZ,MAAMC,EAAaD,CAAK,EACxB,MAAA,CAER,EClBaE,EAAgBA,IAAM,CAC/B,MAAMC,EAAWC,EAAY,EAEvBC,EAAWC,EAAY,CACzBC,WAAYA,CAAC,CAAEV,eAAAA,KACXV,EAA4B,CAAEU,eAAAA,CAAAA,CAAgB,EAClDW,QAAoBR,GAAA,CAChBS,EAAaT,EAAMlB,OAAO,CAC9B,EACA4B,UAAWA,IAAM,CACbC,EAAe,iBAAgB,CAEnC,EACAC,UAAWA,IAAM,CACHT,EAAA,IAAGU,EAAgBC,KAAM,GAAG,CAAEC,QAAS,EAAA,CAAM,CAAA,CAC3D,CACH,EAEKlB,EAAiBmB,EAAoB,EAE3CC,EAAAA,UAAU,IAAM,CACZZ,EAASa,OAAO,CAAErB,eAAAA,CAAAA,CAAgB,CACtC,EAAG,EAAE,CACT,EC7BMsB,EAAuBA,KACXjB,EAAA,EAGVkB,MAAC,OAAI,UAAU,0CACX,eAACC,EAAoB,CAAA,UAAU,wDAAuD,CAC1F,CAAA"}