{"version":3,"file":"Login-BC2QbBNa.js","sources":["../../src/modules/auth/login/components/LoginFooter.tsx","../../src/assets/icons/IconGoogle.tsx","../../node_modules/@react-oauth/google/dist/index.esm.js","../../src/components/google-login/service/server_googleLogin.ts","../../src/components/google-login/hooks/useGoogleKzenLogin.ts","../../src/components/google-login/GoogleLogin.tsx","../../src/modules/auth/login/services/server_loginUser.ts","../../src/modules/auth/login/hooks/useLoginOnSubmit.ts","../../src/modules/auth/login/hooks/useLoginOnValidate.ts","../../src/modules/auth/login/hooks/useLoginInitialValues.ts","../../src/modules/auth/login/Login.tsx"],"sourcesContent":["import { APP_ROUTES_ENUM } from '@/services/enums'\nimport { NavLink } from 'react-router-dom'\n\nexport const LoginFooter = () => {\n    return (\n        <div className='font-kzen flex my-4 h-10 w-full flex-initial flex-col items-center justify-center'>\n            <NavLink\n                className='cursor-pointer text-sm opacity-70 hover:text-blue-600 hover:underline hover:opacity-100'\n                to={`/${APP_ROUTES_ENUM.REGISTER}`}\n            >\n                Register\n            </NavLink>\n            <NavLink\n                className='width-[200px] cursor-pointer text-xs opacity-70 hover:text-blue-600 hover:opacity-100'\n                to={`/${APP_ROUTES_ENUM.RESTORE_ACCOUNT}`}\n            >\n                Forgot password?\n                <span className='px-1 hover:underline'>Restore it</span>\n            </NavLink>\n        </div>\n    )\n}\n","import React from 'react'\nimport type { SVGProps } from 'react'\n\nexport function IconGoogle(props: SVGProps<SVGSVGElement>) {\n    return (\n        <svg xmlns='http://www.w3.org/2000/svg' width='1rem' height='1rem' viewBox='0 0 14 14' {...props}>\n            <path\n                fill='currentColor'\n                d='M7.14 8.33v-2.6h6.69c.1.44.18.85.18 1.44c0 4-2.74 6.84-6.86 6.84S0 10.86 0 7s3.2-7 7.14-7c1.93 0 3.54.69 4.78 1.83L9.89 3.76c-.51-.48-1.41-1.04-2.75-1.04c-2.36 0-4.29 1.93-4.29 4.28s1.93 4.28 4.29 4.28c2.74 0 3.74-1.86 3.93-2.95H7.13Z'\n            ></path>\n        </svg>\n    )\n}\n","'use client'\nimport React, { useState, useRef, useEffect, createContext, useMemo, useContext, useCallback } from 'react';\n\nfunction useLoadGsiScript(options = {}) {\r\n    const { nonce, onScriptLoadSuccess, onScriptLoadError } = options;\r\n    const [scriptLoadedSuccessfully, setScriptLoadedSuccessfully] = useState(false);\r\n    const onScriptLoadSuccessRef = useRef(onScriptLoadSuccess);\r\n    onScriptLoadSuccessRef.current = onScriptLoadSuccess;\r\n    const onScriptLoadErrorRef = useRef(onScriptLoadError);\r\n    onScriptLoadErrorRef.current = onScriptLoadError;\r\n    useEffect(() => {\r\n        const scriptTag = document.createElement('script');\r\n        scriptTag.src = 'https://accounts.google.com/gsi/client';\r\n        scriptTag.async = true;\r\n        scriptTag.defer = true;\r\n        scriptTag.nonce = nonce;\r\n        scriptTag.onload = () => {\r\n            var _a;\r\n            setScriptLoadedSuccessfully(true);\r\n            (_a = onScriptLoadSuccessRef.current) === null || _a === void 0 ? void 0 : _a.call(onScriptLoadSuccessRef);\r\n        };\r\n        scriptTag.onerror = () => {\r\n            var _a;\r\n            setScriptLoadedSuccessfully(false);\r\n            (_a = onScriptLoadErrorRef.current) === null || _a === void 0 ? void 0 : _a.call(onScriptLoadErrorRef);\r\n        };\r\n        document.body.appendChild(scriptTag);\r\n        return () => {\r\n            document.body.removeChild(scriptTag);\r\n        };\r\n    }, [nonce]);\r\n    return scriptLoadedSuccessfully;\r\n}\n\nconst GoogleOAuthContext = createContext(null);\r\nfunction GoogleOAuthProvider({ clientId, nonce, onScriptLoadSuccess, onScriptLoadError, children, }) {\r\n    const scriptLoadedSuccessfully = useLoadGsiScript({\r\n        nonce,\r\n        onScriptLoadSuccess,\r\n        onScriptLoadError,\r\n    });\r\n    const contextValue = useMemo(() => ({\r\n        clientId,\r\n        scriptLoadedSuccessfully,\r\n    }), [clientId, scriptLoadedSuccessfully]);\r\n    return (React.createElement(GoogleOAuthContext.Provider, { value: contextValue }, children));\r\n}\r\nfunction useGoogleOAuth() {\r\n    const context = useContext(GoogleOAuthContext);\r\n    if (!context) {\r\n        throw new Error('Google OAuth components must be used within GoogleOAuthProvider');\r\n    }\r\n    return context;\r\n}\n\nfunction extractClientId(credentialResponse) {\r\n    var _a;\r\n    const clientId = (_a = credentialResponse === null || credentialResponse === void 0 ? void 0 : credentialResponse.clientId) !== null && _a !== void 0 ? _a : credentialResponse === null || credentialResponse === void 0 ? void 0 : credentialResponse.client_id;\r\n    return clientId;\r\n}\n\nconst containerHeightMap = { large: 40, medium: 32, small: 20 };\r\nfunction GoogleLogin({ onSuccess, onError, useOneTap, promptMomentNotification, type = 'standard', theme = 'outline', size = 'large', text, shape, logo_alignment, width, locale, click_listener, containerProps, ...props }) {\r\n    const btnContainerRef = useRef(null);\r\n    const { clientId, scriptLoadedSuccessfully } = useGoogleOAuth();\r\n    const onSuccessRef = useRef(onSuccess);\r\n    onSuccessRef.current = onSuccess;\r\n    const onErrorRef = useRef(onError);\r\n    onErrorRef.current = onError;\r\n    const promptMomentNotificationRef = useRef(promptMomentNotification);\r\n    promptMomentNotificationRef.current = promptMomentNotification;\r\n    useEffect(() => {\r\n        var _a, _b, _c, _d, _e, _f, _g, _h, _j;\r\n        if (!scriptLoadedSuccessfully)\r\n            return;\r\n        (_c = (_b = (_a = window === null || window === void 0 ? void 0 : window.google) === null || _a === void 0 ? void 0 : _a.accounts) === null || _b === void 0 ? void 0 : _b.id) === null || _c === void 0 ? void 0 : _c.initialize({\r\n            client_id: clientId,\r\n            callback: (credentialResponse) => {\r\n                var _a;\r\n                if (!(credentialResponse === null || credentialResponse === void 0 ? void 0 : credentialResponse.credential)) {\r\n                    return (_a = onErrorRef.current) === null || _a === void 0 ? void 0 : _a.call(onErrorRef);\r\n                }\r\n                const { credential, select_by } = credentialResponse;\r\n                onSuccessRef.current({\r\n                    credential,\r\n                    clientId: extractClientId(credentialResponse),\r\n                    select_by,\r\n                });\r\n            },\r\n            ...props,\r\n        });\r\n        (_f = (_e = (_d = window === null || window === void 0 ? void 0 : window.google) === null || _d === void 0 ? void 0 : _d.accounts) === null || _e === void 0 ? void 0 : _e.id) === null || _f === void 0 ? void 0 : _f.renderButton(btnContainerRef.current, {\r\n            type,\r\n            theme,\r\n            size,\r\n            text,\r\n            shape,\r\n            logo_alignment,\r\n            width,\r\n            locale,\r\n            click_listener,\r\n        });\r\n        if (useOneTap)\r\n            (_j = (_h = (_g = window === null || window === void 0 ? void 0 : window.google) === null || _g === void 0 ? void 0 : _g.accounts) === null || _h === void 0 ? void 0 : _h.id) === null || _j === void 0 ? void 0 : _j.prompt(promptMomentNotificationRef.current);\r\n        return () => {\r\n            var _a, _b, _c;\r\n            if (useOneTap)\r\n                (_c = (_b = (_a = window === null || window === void 0 ? void 0 : window.google) === null || _a === void 0 ? void 0 : _a.accounts) === null || _b === void 0 ? void 0 : _b.id) === null || _c === void 0 ? void 0 : _c.cancel();\r\n        };\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [\r\n        clientId,\r\n        scriptLoadedSuccessfully,\r\n        useOneTap,\r\n        type,\r\n        theme,\r\n        size,\r\n        text,\r\n        shape,\r\n        logo_alignment,\r\n        width,\r\n        locale,\r\n    ]);\r\n    return (React.createElement(\"div\", { ...containerProps, ref: btnContainerRef, style: { height: containerHeightMap[size], ...containerProps === null || containerProps === void 0 ? void 0 : containerProps.style } }));\r\n}\n\nfunction googleLogout() {\r\n    var _a, _b, _c;\r\n    (_c = (_b = (_a = window === null || window === void 0 ? void 0 : window.google) === null || _a === void 0 ? void 0 : _a.accounts) === null || _b === void 0 ? void 0 : _b.id) === null || _c === void 0 ? void 0 : _c.disableAutoSelect();\r\n}\n\n/* eslint-disable import/export */\r\nfunction useGoogleLogin({ flow = 'implicit', scope = '', onSuccess, onError, onNonOAuthError, overrideScope, state, ...props }) {\r\n    const { clientId, scriptLoadedSuccessfully } = useGoogleOAuth();\r\n    const clientRef = useRef();\r\n    const onSuccessRef = useRef(onSuccess);\r\n    onSuccessRef.current = onSuccess;\r\n    const onErrorRef = useRef(onError);\r\n    onErrorRef.current = onError;\r\n    const onNonOAuthErrorRef = useRef(onNonOAuthError);\r\n    onNonOAuthErrorRef.current = onNonOAuthError;\r\n    useEffect(() => {\r\n        var _a, _b;\r\n        if (!scriptLoadedSuccessfully)\r\n            return;\r\n        const clientMethod = flow === 'implicit' ? 'initTokenClient' : 'initCodeClient';\r\n        const client = (_b = (_a = window === null || window === void 0 ? void 0 : window.google) === null || _a === void 0 ? void 0 : _a.accounts) === null || _b === void 0 ? void 0 : _b.oauth2[clientMethod]({\r\n            client_id: clientId,\r\n            scope: overrideScope ? scope : `openid profile email ${scope}`,\r\n            callback: (response) => {\r\n                var _a, _b;\r\n                if (response.error)\r\n                    return (_a = onErrorRef.current) === null || _a === void 0 ? void 0 : _a.call(onErrorRef, response);\r\n                (_b = onSuccessRef.current) === null || _b === void 0 ? void 0 : _b.call(onSuccessRef, response);\r\n            },\r\n            error_callback: (nonOAuthError) => {\r\n                var _a;\r\n                (_a = onNonOAuthErrorRef.current) === null || _a === void 0 ? void 0 : _a.call(onNonOAuthErrorRef, nonOAuthError);\r\n            },\r\n            state,\r\n            ...props,\r\n        });\r\n        clientRef.current = client;\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [clientId, scriptLoadedSuccessfully, flow, scope, state]);\r\n    const loginImplicitFlow = useCallback((overrideConfig) => { var _a; return (_a = clientRef.current) === null || _a === void 0 ? void 0 : _a.requestAccessToken(overrideConfig); }, []);\r\n    const loginAuthCodeFlow = useCallback(() => { var _a; return (_a = clientRef.current) === null || _a === void 0 ? void 0 : _a.requestCode(); }, []);\r\n    return flow === 'implicit' ? loginImplicitFlow : loginAuthCodeFlow;\r\n}\n\nfunction useGoogleOneTapLogin({ onSuccess, onError, promptMomentNotification, cancel_on_tap_outside, prompt_parent_id, state_cookie_domain, hosted_domain, use_fedcm_for_prompt = false, disabled, auto_select, }) {\r\n    const { clientId, scriptLoadedSuccessfully } = useGoogleOAuth();\r\n    const onSuccessRef = useRef(onSuccess);\r\n    onSuccessRef.current = onSuccess;\r\n    const onErrorRef = useRef(onError);\r\n    onErrorRef.current = onError;\r\n    const promptMomentNotificationRef = useRef(promptMomentNotification);\r\n    promptMomentNotificationRef.current = promptMomentNotification;\r\n    useEffect(() => {\r\n        var _a, _b, _c, _d, _e, _f, _g, _h, _j;\r\n        if (!scriptLoadedSuccessfully)\r\n            return;\r\n        if (disabled) {\r\n            (_c = (_b = (_a = window === null || window === void 0 ? void 0 : window.google) === null || _a === void 0 ? void 0 : _a.accounts) === null || _b === void 0 ? void 0 : _b.id) === null || _c === void 0 ? void 0 : _c.cancel();\r\n            return;\r\n        }\r\n        (_f = (_e = (_d = window === null || window === void 0 ? void 0 : window.google) === null || _d === void 0 ? void 0 : _d.accounts) === null || _e === void 0 ? void 0 : _e.id) === null || _f === void 0 ? void 0 : _f.initialize({\r\n            client_id: clientId,\r\n            callback: (credentialResponse) => {\r\n                var _a;\r\n                if (!(credentialResponse === null || credentialResponse === void 0 ? void 0 : credentialResponse.credential)) {\r\n                    return (_a = onErrorRef.current) === null || _a === void 0 ? void 0 : _a.call(onErrorRef);\r\n                }\r\n                const { credential, select_by } = credentialResponse;\r\n                onSuccessRef.current({\r\n                    credential,\r\n                    clientId: extractClientId(credentialResponse),\r\n                    select_by,\r\n                });\r\n            },\r\n            hosted_domain,\r\n            cancel_on_tap_outside,\r\n            prompt_parent_id,\r\n            state_cookie_domain,\r\n            use_fedcm_for_prompt,\r\n            auto_select,\r\n        });\r\n        (_j = (_h = (_g = window === null || window === void 0 ? void 0 : window.google) === null || _g === void 0 ? void 0 : _g.accounts) === null || _h === void 0 ? void 0 : _h.id) === null || _j === void 0 ? void 0 : _j.prompt(promptMomentNotificationRef.current);\r\n        return () => {\r\n            var _a, _b, _c;\r\n            (_c = (_b = (_a = window === null || window === void 0 ? void 0 : window.google) === null || _a === void 0 ? void 0 : _a.accounts) === null || _b === void 0 ? void 0 : _b.id) === null || _c === void 0 ? void 0 : _c.cancel();\r\n        };\r\n    }, [\r\n        clientId,\r\n        scriptLoadedSuccessfully,\r\n        cancel_on_tap_outside,\r\n        prompt_parent_id,\r\n        state_cookie_domain,\r\n        hosted_domain,\r\n        use_fedcm_for_prompt,\r\n        disabled,\r\n        auto_select,\r\n    ]);\r\n}\n\n/**\r\n * Checks if the user granted all the specified scope or scopes\r\n * @returns True if all the scopes are granted\r\n */\r\nfunction hasGrantedAllScopesGoogle(tokenResponse, firstScope, ...restScopes) {\r\n    var _a, _b, _c;\r\n    if (!(window === null || window === void 0 ? void 0 : window.google))\r\n        return false;\r\n    return (((_c = (_b = (_a = window === null || window === void 0 ? void 0 : window.google) === null || _a === void 0 ? void 0 : _a.accounts) === null || _b === void 0 ? void 0 : _b.oauth2) === null || _c === void 0 ? void 0 : _c.hasGrantedAllScopes(tokenResponse, firstScope, ...restScopes)) || false);\r\n}\n\n/**\r\n * Checks if the user granted any of the specified scope or scopes.\r\n * @returns True if any of the scopes are granted\r\n */\r\nfunction hasGrantedAnyScopeGoogle(tokenResponse, firstScope, ...restScopes) {\r\n    var _a, _b, _c;\r\n    if (!(window === null || window === void 0 ? void 0 : window.google))\r\n        return false;\r\n    return (((_c = (_b = (_a = window === null || window === void 0 ? void 0 : window.google) === null || _a === void 0 ? void 0 : _a.accounts) === null || _b === void 0 ? void 0 : _b.oauth2) === null || _c === void 0 ? void 0 : _c.hasGrantedAnyScope(tokenResponse, firstScope, ...restScopes)) || false);\r\n}\n\nexport { GoogleLogin, GoogleOAuthProvider, googleLogout, hasGrantedAllScopesGoogle, hasGrantedAnyScopeGoogle, useGoogleLogin, useGoogleOAuth, useGoogleOneTapLogin };\n","import { resolveError } from '@/helpers/tryCatchRequest'\nimport { type ISessionCredentials } from '@/modules/auth/login/services/types'\nimport ky from 'ky'\n\nexport const server_googleLogin = async ({ formData: json }: { formData: { accessJWT: string } }) => {\n    const endpoint = import.meta.env['VITE_NODE_HEROKU_ORIGIN']\n    const xapikey = import.meta.env['VITE_X_API_KEY']\n\n    try {\n        return await ky\n            .post(`${endpoint}google-login`, {\n                credentials: 'include',\n                json,\n                method: 'POST',\n                headers: {\n                    'x-api-key': xapikey,\n                    'Content-Type': 'application/json',\n                },\n            })\n            .json<Promise<ISessionCredentials | undefined>>()\n    } catch (e) {\n        return await resolveError(e)\n    }\n}\n","import { useGoogleLogin } from '@react-oauth/google'\nimport { server_googleLogin } from '../service/server_googleLogin'\nimport { setAccessIdInCookie, setSessionJWTInCookie } from '@/helpers/universalCookie'\nimport { parseJwt } from '@/helpers/parseJwt'\nimport { processError } from '@/helpers/processMessage'\nimport { useRoot$ } from '@/modules/app/mst/StoreProvider'\nimport { useQueryClient } from '@tanstack/react-query'\n\nexport const useGoogleKzenLogin = () => {\n    const queryClient = useQueryClient()\n    const { selectUser } = useRoot$()\n    const googleLogin = useGoogleLogin({\n        onSuccess: async (credentialResponse) => {\n            const res = await server_googleLogin({ formData: { accessJWT: credentialResponse.access_token } })\n            const jwtToken = res?.accessJWT\n            const sessionJWT = res?.sessionJWT\n            jwtToken && setAccessIdInCookie(jwtToken)\n            const data = parseJwt(jwtToken)\n            setAccessIdInCookie(jwtToken)\n            setSessionJWTInCookie(sessionJWT)\n            selectUser({\n                queryClient,\n                user: { id: data?.id, role: data?.role },\n            })\n        },\n        onError: () => {\n            processError('Google login failed')\n        },\n    })\n\n    return { googleLogin }\n}\n","import { StyledButton } from '../buttons/StyledButton'\nimport { IconGoogle } from '@/assets/icons/IconGoogle'\n\nimport { useGoogleKzenLogin } from './hooks/useGoogleKzenLogin'\n\nexport const GoogleLogin = () => {\n    const { googleLogin } = useGoogleKzenLogin()\n\n    return (\n        <StyledButton\n            variant='outlined'\n            onClick={() => googleLogin()}\n            startIcon={<IconGoogle className='text-rose-500' />}\n        >\n            Sign in with Google\n        </StyledButton>\n    )\n}\n\n// curl \"https://www.googleapis.com/oauth2/v1/tokeninfo?access_token=ya29.a0AXooCgu9tfBN4cFDJO00YmtqUTwkub7QeyBM5IRobGhTOy3kXzW_XsJHXULdndXXrHopAOoO9F_wVylmxgtdfADRYEGmF_qof-RLfWO449zw0ccRKLnIPQhh0HIKs0WoAPjerhk-E593JeD_zrWpRpb-ImqutNiHLwaCgYKASgSARMSFQHGX2Mikp0hinIQpXX0KQbePduFIg0169\"\n","import { resolveError } from '@/helpers/tryCatchRequest'\nimport ky from 'ky'\nimport type { ISessionCredentials, IUserLoginSchema } from './types'\n\nexport const server_loginUser = async (props: { formData: IUserLoginSchema }) => {\n    const endpoint = import.meta.env['VITE_NODE_HEROKU_ORIGIN']\n    const xapikey = import.meta.env['VITE_X_API_KEY']\n\n    try {\n        return await ky\n            .post(`${endpoint}login`, {\n                credentials: 'include',\n                json: props.formData,\n                method: 'POST',\n                headers: {\n                    'x-api-key': xapikey,\n                    'Content-Type': 'application/json',\n                },\n            })\n            .json<Promise<ISessionCredentials | undefined>>()\n    } catch (e) {\n        return await resolveError(e)\n    }\n}\n","import { type FormikHelpers } from 'formik'\nimport { server_loginUser } from '../services/server_loginUser'\nimport { type IUserLoginSchema } from '../services/types'\nimport { useMutation, useQueryClient } from '@tanstack/react-query'\nimport { useRoot$ } from '@/modules/app/mst/StoreProvider'\nimport { parseJwt } from '@/helpers/parseJwt'\nimport { setAccessIdInCookie, setSessionJWTInCookie } from '@/helpers/universalCookie'\n\nexport const useLoginOnSubmit = () => {\n    const queryClient = useQueryClient()\n    const { selectUser } = useRoot$()\n    const mutation = useMutation({\n        mutationFn: ({ formData }: { formData: IUserLoginSchema }) => server_loginUser({ formData }),\n    })\n\n    const onSubmit = (values: IUserLoginSchema, formikHelpers: FormikHelpers<IUserLoginSchema>) => {\n        const { resetForm, setSubmitting } = formikHelpers\n\n        mutation.mutate(\n            { formData: values },\n            {\n                onError: (/* error */) => {\n                    // processError(error.message)\n                },\n                onSuccess: (res) => {\n                    resetForm()\n\n                    const data = parseJwt(res?.accessJWT)\n                    const sessionJWT = res?.sessionJWT\n\n                    setSessionJWTInCookie(sessionJWT)\n                    setAccessIdInCookie(res?.accessJWT)\n\n                    selectUser({\n                        queryClient,\n                        user: { id: data?.id, role: data?.role },\n                    })\n                },\n                onSettled: () => {\n                    setSubmitting(false)\n                },\n            },\n        )\n    }\n\n    return { onSubmit }\n}\n","import { type IUserLoginSchema, userLoginSchema } from '../services/types'\n\nexport const useLoginOnValidate = () => {\n    const validate = (values: IUserLoginSchema) => {\n        const result = userLoginSchema.safeParse(values)\n\n        if (!result.success) {\n            const errors: Partial<IUserLoginSchema> = {}\n            for (const issue of result.error.issues) {\n                errors[issue.path[0] as keyof IUserLoginSchema] = issue.message\n            }\n            if (!values.email.length) {\n                errors.email = 'Required field'\n            }\n            return errors\n        }\n\n        return {}\n    }\n\n    return { validate }\n}\n","import { type IUserLoginSchema } from '../services/types'\n\nexport const useLoginInitialValues = (): { initialValues: IUserLoginSchema } => {\n    return { initialValues: { email: '', password: '' } }\n}\n","import { Form, Formik } from 'formik'\nimport { AuthPasswordInput } from '../shared-components/AuthPasswordInput'\nimport { LoginFooter } from './components/LoginFooter'\nimport { GoogleLogin } from '@/components/google-login/GoogleLogin'\nimport { StyledButton } from '@/components/buttons/StyledButton'\nimport { useLoginOnSubmit } from './hooks/useLoginOnSubmit'\nimport { useLoginOnValidate } from './hooks/useLoginOnValidate'\nimport { type IUserLoginSchema } from './services/types'\nimport { useLoginInitialValues } from './hooks/useLoginInitialValues'\nimport { AuthEmailInput } from '../shared-components/AuthEmailInput'\nimport { GoogleOAuthProvider } from '@react-oauth/google'\n\nconst Login = () => {\n    const { onSubmit } = useLoginOnSubmit()\n    const { validate } = useLoginOnValidate()\n    const { initialValues } = useLoginInitialValues()\n\n    return (\n        <div className='flex flex-col gap-10 mt-10 items-center'>\n            <Formik<IUserLoginSchema> initialValues={initialValues} validate={validate} onSubmit={onSubmit}>\n                <Form className='flex flex-col gap-5'>\n                    <AuthEmailInput />\n                    <AuthPasswordInput />\n                    <StyledButton className='w-full' type='submit'>\n                        Login\n                    </StyledButton>\n                    <LoginFooter />\n                </Form>\n            </Formik>\n            <GoogleOAuthProvider clientId={import.meta.env['VITE_GOOGLE_CLIENT_ID']}>\n                <GoogleLogin />\n            </GoogleOAuthProvider>\n        </div>\n    )\n}\n\nexport default Login\n"],"names":["LoginFooter","jsxs","jsx","NavLink","APP_ROUTES_ENUM","REGISTER","RESTORE_ACCOUNT","IconGoogle","props","useLoadGsiScript","options","nonce","onScriptLoadSuccess","onScriptLoadError","scriptLoadedSuccessfully","setScriptLoadedSuccessfully","useState","onScriptLoadSuccessRef","useRef","onScriptLoadErrorRef","useEffect","scriptTag","_a","GoogleOAuthContext","createContext","GoogleOAuthProvider","clientId","children","contextValue","useMemo","React","useGoogleOAuth","context","useContext","useGoogleLogin","flow","scope","onSuccess","onError","onNonOAuthError","overrideScope","state","clientRef","onSuccessRef","onErrorRef","onNonOAuthErrorRef","_b","clientMethod","client","response","nonOAuthError","loginImplicitFlow","useCallback","overrideConfig","loginAuthCodeFlow","server_googleLogin","formData","json","endpoint","import","xapikey","ky","post","credentials","method","headers","e","resolveError","useGoogleKzenLogin","queryClient","useQueryClient","selectUser","useRoot$","googleLogin","credentialResponse","res","accessJWT","access_token","jwtToken","sessionJWT","setAccessIdInCookie","data","parseJwt","setSessionJWTInCookie","user","id","role","processError","GoogleLogin","StyledButton","server_loginUser","useLoginOnSubmit","mutation","useMutation","mutationFn","onSubmit","values","formikHelpers","resetForm","setSubmitting","mutate","onSettled","useLoginOnValidate","validate","result","userLoginSchema","safeParse","success","errors","issue","error","issues","path","message","email","length","useLoginInitialValues","initialValues","password","Login","Formik","Form","AuthEmailInput","AuthPasswordInput"],"mappings":"idAGO,MAAMA,EAAcA,IAEnBC,EAAA,KAAC,MAAI,CAAA,UAAU,oFACX,SAAA,CAACC,EAAAA,IAAAC,EAAA,CACG,UAAU,0FACV,GAAK,IAAGC,EAAgBC,QAAS,GAAE,SAGvC,UAAA,CAAA,EACAJ,EAAAA,KAACE,GACG,UAAU,wFACV,GAAK,IAAGC,EAAgBE,eAAgB,GAAE,SAAA,CAAA,mBAGzCJ,EAAA,IAAA,OAAA,CAAK,UAAU,uBAAuB,SAAU,YAAA,CAAA,CAAA,CACrD,CAAA,CAAA,EACJ,EChBD,SAASK,EAAWC,EAAgC,CACvD,aACK,MAAI,CAAA,MAAM,6BAA6B,MAAM,OAAO,OAAO,OAAO,QAAQ,YAAgBA,GAAAA,EACvF,SAACN,EAAA,IAAA,OAAA,CACG,KAAK,eACL,EAAE,4OACL,CAAA,EACL,CAER,CCTA,SAASO,EAAiBC,EAAU,GAAI,CACpC,KAAM,CAAE,MAAAC,EAAO,oBAAAC,EAAqB,kBAAAC,CAAiB,EAAKH,EACpD,CAACI,EAA0BC,CAA2B,EAAIC,EAAQ,SAAC,EAAK,EACxEC,EAAyBC,SAAON,CAAmB,EACzDK,EAAuB,QAAUL,EACjC,MAAMO,EAAuBD,SAAOL,CAAiB,EACrD,OAAAM,EAAqB,QAAUN,EAC/BO,EAAAA,UAAU,IAAM,CACZ,MAAMC,EAAY,SAAS,cAAc,QAAQ,EACjD,OAAAA,EAAU,IAAM,yCAChBA,EAAU,MAAQ,GAClBA,EAAU,MAAQ,GAClBA,EAAU,MAAQV,EAClBU,EAAU,OAAS,IAAM,CACrB,IAAIC,EACJP,EAA4B,EAAI,GAC/BO,EAAKL,EAAuB,WAAa,MAAQK,IAAO,QAAkBA,EAAG,KAAKL,CAAsB,CACrH,EACQI,EAAU,QAAU,IAAM,CACtB,IAAIC,EACJP,EAA4B,EAAK,GAChCO,EAAKH,EAAqB,WAAa,MAAQG,IAAO,QAAkBA,EAAG,KAAKH,CAAoB,CACjH,EACQ,SAAS,KAAK,YAAYE,CAAS,EAC5B,IAAM,CACT,SAAS,KAAK,YAAYA,CAAS,CAC/C,CACA,EAAO,CAACV,CAAK,CAAC,EACHG,CACX,CAEA,MAAMS,EAAqBC,EAAAA,cAAc,IAAI,EAC7C,SAASC,EAAoB,CAAE,SAAAC,EAAU,MAAAf,EAAO,oBAAAC,EAAqB,kBAAAC,EAAmB,SAAAc,GAAa,CACjG,MAAMb,EAA2BL,EAAiB,CAC9C,MAAAE,EACA,oBAAAC,EACA,kBAAAC,CACR,CAAK,EACKe,EAAeC,EAAAA,QAAQ,KAAO,CAChC,SAAAH,EACA,yBAAAZ,CACH,GAAG,CAACY,EAAUZ,CAAwB,CAAC,EACxC,OAAQgB,EAAM,cAAcP,EAAmB,SAAU,CAAE,MAAOK,GAAgBD,CAAQ,CAC9F,CACA,SAASI,GAAiB,CACtB,MAAMC,EAAUC,aAAWV,CAAkB,EAC7C,GAAI,CAACS,EACD,MAAM,IAAI,MAAM,iEAAiE,EAErF,OAAOA,CACX,CA+EA,SAASE,EAAe,CAAE,KAAAC,EAAO,WAAY,MAAAC,EAAQ,GAAI,UAAAC,EAAW,QAAAC,EAAS,gBAAAC,EAAiB,cAAAC,EAAe,MAAAC,EAAO,GAAGjC,CAAK,EAAI,CAC5H,KAAM,CAAE,SAAAkB,EAAU,yBAAAZ,CAA0B,EAAGiB,EAAc,EACvDW,EAAYxB,EAAAA,SACZyB,EAAezB,SAAOmB,CAAS,EACrCM,EAAa,QAAUN,EACvB,MAAMO,EAAa1B,SAAOoB,CAAO,EACjCM,EAAW,QAAUN,EACrB,MAAMO,EAAqB3B,SAAOqB,CAAe,EACjDM,EAAmB,QAAUN,EAC7BnB,EAAAA,UAAU,IAAM,CACZ,IAAIE,EAAIwB,EACR,GAAI,CAAChC,EACD,OACJ,MAAMiC,EAAeZ,IAAS,WAAa,kBAAoB,iBACzDa,GAAUF,GAAMxB,EAAK,QAAW,KAA4B,OAAS,OAAO,UAAY,MAAQA,IAAO,OAAS,OAASA,EAAG,YAAc,MAAQwB,IAAO,OAAS,OAASA,EAAG,OAAOC,CAAY,EAAE,CACrM,UAAWrB,EACX,MAAOc,EAAgBJ,EAAQ,wBAAwBA,CAAK,GAC5D,SAAWa,GAAa,CACpB,IAAI3B,EAAIwB,EACR,GAAIG,EAAS,MACT,OAAQ3B,EAAKsB,EAAW,WAAa,MAAQtB,IAAO,OAAS,OAASA,EAAG,KAAKsB,EAAYK,CAAQ,GACrGH,EAAKH,EAAa,WAAa,MAAQG,IAAO,QAAkBA,EAAG,KAAKH,EAAcM,CAAQ,CAClG,EACD,eAAiBC,GAAkB,CAC/B,IAAI5B,GACHA,EAAKuB,EAAmB,WAAa,MAAQvB,IAAO,QAAkBA,EAAG,KAAKuB,EAAoBK,CAAa,CACnH,EACD,MAAAT,EACA,GAAGjC,CACf,CAAS,EACDkC,EAAU,QAAUM,CAE5B,EAAO,CAACtB,EAAUZ,EAA0BqB,EAAMC,EAAOK,CAAK,CAAC,EAC3D,MAAMU,EAAoBC,cAAaC,GAAmB,CAAE,IAAI/B,EAAI,OAAQA,EAAKoB,EAAU,WAAa,MAAQpB,IAAO,OAAS,OAASA,EAAG,mBAAmB+B,CAAc,GAAM,CAAA,CAAE,EAC/KC,EAAoBF,EAAW,YAAC,IAAM,CAAE,IAAI9B,EAAI,OAAQA,EAAKoB,EAAU,WAAa,MAAQpB,IAAO,OAAS,OAASA,EAAG,YAAa,GAAK,CAAA,CAAE,EAClJ,OAAOa,IAAS,WAAagB,EAAoBG,CACrD,CCpKO,MAAMC,EAAqB,MAAO,CAAEC,SAAUC,CAA0C,IAAM,CAC3FC,MAAAA,EAAWC,8BACXC,EAAUD,YAEZ,GAAA,CACA,OAAO,MAAME,EACRC,KAAM,GAAEJ,CAAS,eAAe,CAC7BK,YAAa,UACbN,KAAAA,EACAO,OAAQ,OACRC,QAAS,CACL,YAAaL,EACb,eAAgB,kBAAA,CAEvB,CAAA,EACAH,KAA+C,QAC/CS,EAAG,CACD,OAAA,MAAMC,EAAaD,CAAC,CAAA,CAEnC,ECfaE,EAAqBA,IAAM,CACpC,MAAMC,EAAcC,EAAe,EAC7B,CAAEC,WAAAA,GAAeC,EAAS,EAoBzB,MAAA,CAAEC,YAnBWvC,EAAe,CAC/BG,UAAW,MAAOqC,GAAuB,CAC/BC,MAAAA,EAAM,MAAMpB,EAAmB,CAAEC,SAAU,CAAEoB,UAAWF,EAAmBG,YAAAA,CAAa,CAAG,EAC3FC,EAAWH,GAAAA,YAAAA,EAAKC,UAChBG,EAAaJ,GAAAA,YAAAA,EAAKI,WACxBD,GAAYE,EAAoBF,CAAQ,EAClCG,MAAAA,EAAOC,EAASJ,CAAQ,EAC9BE,EAAoBF,CAAQ,EAC5BK,EAAsBJ,CAAU,EACrBR,EAAA,CACPF,YAAAA,EACAe,KAAM,CAAEC,GAAIJ,GAAAA,YAAAA,EAAMI,GAAIC,KAAML,GAAAA,YAAAA,EAAMK,IAAAA,CAAK,CAC1C,CACL,EACAhD,QAASA,IAAM,CACXiD,EAAa,qBAAqB,CAAA,CACtC,CACH,CAEoB,CACzB,EC1BaC,EAAcA,IAAM,CACvB,KAAA,CAAEf,YAAAA,GAAgBL,EAAmB,EAE3C,OACKlE,EAAAA,IAAAuF,EAAA,CACG,QAAQ,WACR,QAAS,IAAMhB,EACf,EAAA,UAAYvE,EAAA,IAAAK,EAAA,CAAW,UAAU,eAAA,CAAe,EAAI,SAGxD,sBAAA,CAER,ECbamF,EAAmB,MAAOlF,GAA0C,CACvEkD,MAAAA,EAAWC,8BACXC,EAAUD,YAEZ,GAAA,CACA,OAAO,MAAME,EACRC,KAAM,GAAEJ,CAAS,QAAQ,CACtBK,YAAa,UACbN,KAAMjD,EAAMgD,SACZQ,OAAQ,OACRC,QAAS,CACL,YAAaL,EACb,eAAgB,kBAAA,CAEvB,CAAA,EACAH,KAA+C,QAC/CS,EAAG,CACD,OAAA,MAAMC,EAAaD,CAAC,CAAA,CAEnC,ECfayB,GAAmBA,IAAM,CAClC,MAAMtB,EAAcC,EAAe,EAC7B,CAAEC,WAAAA,GAAeC,EAAS,EAC1BoB,EAAWC,EAAY,CACzBC,WAAYA,CAAC,CAAEtC,SAAAA,KAA+CkC,EAAiB,CAAElC,SAAAA,CAAU,CAAA,CAAA,CAC9F,EAgCM,MAAA,CAAEuC,SA9BQA,CAACC,EAA0BC,IAAmD,CACrF,KAAA,CAAEC,UAAAA,EAAWC,cAAAA,CAAAA,EAAkBF,EAErCL,EAASQ,OACL,CAAE5C,SAAUwC,CAAAA,EACZ,CACI1D,QAASA,IAAiB,CACtB,EAEJD,UAAoBsC,GAAA,CACNuB,EAAA,EAEJjB,MAAAA,EAAOC,EAASP,GAAAA,YAAAA,EAAKC,SAAS,EAC9BG,EAAaJ,GAAAA,YAAAA,EAAKI,WAExBI,EAAsBJ,CAAU,EAChCC,EAAoBL,GAAAA,YAAAA,EAAKC,SAAS,EAEvBL,EAAA,CACPF,YAAAA,EACAe,KAAM,CAAEC,GAAIJ,GAAAA,YAAAA,EAAMI,GAAIC,KAAML,GAAAA,YAAAA,EAAMK,IAAAA,CAAK,CAC1C,CACL,EACAe,UAAWA,IAAM,CACbF,EAAc,EAAK,CAAA,CACvB,CAER,CACJ,CAEkB,CACtB,EC5CaG,GAAqBA,KAkBvB,CAAEC,SAjBSP,GAA6B,CACrCQ,MAAAA,EAASC,EAAgBC,UAAUV,CAAM,EAE3C,GAAA,CAACQ,EAAOG,QAAS,CACjB,MAAMC,EAAoC,CAAC,EAChCC,UAAAA,KAASL,EAAOM,MAAMC,OAC7BH,EAAOC,EAAMG,KAAK,CAAC,CAA2B,EAAIH,EAAMI,QAExD,OAACjB,EAAOkB,MAAMC,SACdP,EAAOM,MAAQ,kBAEZN,CAAAA,CAGX,MAAO,CAAC,CACZ,CAEkB,GClBTQ,GAAwBA,KAC1B,CAAEC,cAAe,CAAEH,MAAO,GAAII,SAAU,EAAA,CAAK,GCSlDC,GAAQA,IAAM,CACV,KAAA,CAAExB,SAAAA,GAAaJ,GAAiB,EAChC,CAAEY,SAAAA,GAAaD,GAAmB,EAClC,CAAEe,cAAAA,GAAkBD,GAAsB,EAG5C,OAACnH,EAAA,KAAA,MAAI,CAAA,UAAU,0CACX,SAAA,CAACC,EAAAA,IAAAsH,GAAyB,cAAAH,EAA8B,SAAAd,EAAoB,SAAAR,EACxE,SAAC9F,EAAAA,KAAAwH,EAAA,CAAK,UAAU,sBACZ,SAAA,CAAAvH,EAAA,IAACwH,EAAc,EAAA,QACdC,EAAiB,EAAA,QACjBlC,EAAa,CAAA,UAAU,SAAS,KAAK,SAAQ,SAE9C,QAAA,QACCzF,EAAW,CAAA,CAAA,CAAA,CAAA,CAChB,CAAA,CACJ,EACAE,MAACuB,GAAoB,SAAUkC,2EAC3B,SAACzD,EAAA,IAAAsF,EAAA,CAAA,CAAW,CAChB,CAAA,CAAA,EACJ,CAER","x_google_ignoreList":[2]}