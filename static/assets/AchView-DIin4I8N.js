import{j as a,P as m,O as l,J as d}from"./index-Cx9aHWms.js";import{h as i,b as u}from"./ProtectedRoutes-BInEfiaw.js";import{c as o}from"./cn-Bz47sbbS.js";import{a as p}from"./IconNew-BhAnMb5r.js";import"./antd-bK47dtYc.js";import{X as v}from"./XTooltip-Bdc9vu0b.js";import{S as n}from"./formik.esm-ADxEa5mi.js";import{u as x}from"./useMutation-D6aZmw1J.js";import{a as f}from"./achResponseFr-DHzlt_Pk.js";import{u as A}from"./AchToggleEdit-D8Nqb8YI.js";import{u as g}from"./provider-CFg4W0mD.js";import{I as w}from"./IconEye-DfyAN8Gq.js";const j=({ach:e,isMobile:t})=>e.archived?a.jsx(i,{className:o("text-violet-500",t?"w-9 h-9":"w-6 h-6")}):null,I=({ach:e,isMobile:t})=>e.deleted_at?a.jsx(p,{className:o("text-gray-500",t?"w-9 h-9 mt-1":"w-6 h-6")}):null,y=({ach:e,isMobile:t})=>e.is_favorite?a.jsx(u,{className:o("text-red-500",t?"w-9 h-9":"w-6 h-6")}):null,T=({ach:e,isMobile:t})=>a.jsxs("div",{className:o("absolute flex",t?"bottom-4 right-3 gap-3":"bottom-1 right-2 gap-3"),children:[a.jsx(I,{ach:e,isMobile:t}),a.jsx(j,{ach:e,isMobile:t}),a.jsx(y,{ach:e,isMobile:t})]}),_="_ach_2h26e_1",U={ach:_},N=async({id:e,isArchived:t})=>{const c=m(`
            mutation update_ach_archived($id: uuid!, $archived: Boolean!) {
                update_achievements_by_pk(pk_columns: { id: $id }, _set: { archived: $archived }) {
                    ...AchResponseFr
                }
            }
        `,[f]),r=await l();try{return await r.request(c,{id:e,archived:t})}catch(s){return await d(s)}},F=()=>{const{onSuccess:e}=A(),t=x({mutationFn:({id:r,isArchived:s})=>N({id:r,isArchived:s}),onSuccess:e});return{toggleArchived:({id:r,isArchived:s})=>{t.mutate({id:r,isArchived:s})}}},X=({id:e,isArchived:t,label:c,onClose:r,context:s})=>{const{toggleArchived:h}=F();return a.jsxs(a.Fragment,{children:[a.jsx(n,{id:"toggleArchiveStory",variant:t?"contained":"text",size:"small",onClick:()=>{h({id:e,isArchived:!t}),r()},className:o(t&&"!bg-violet-600",s==="drawer"&&"!w-full !py-5"),startIcon:a.jsx(i,{className:"mb-0.5 h-6 w-6 opacity-70 hover:opacity-100"}),children:c}),!c&&a.jsx(v,{anchorSelect:"#toggleArchiveStory",children:t?"Unarchive":"Archive"})]})},J=({id:e,onClose:t,context:c})=>{const{edit_id:r,onOpenViewMode:s}=g();return a.jsx(a.Fragment,{children:a.jsx(n,{className:o(c==="drawer"&&"!w-full !py-5 !h-0"),id:"editAch",variant:r?"contained":"text",size:"custom",startIcon:a.jsx(w,{className:"h-6 w-6 min-h-6 min-w-6 opacity-70 hover:opacity-100"}),onClick:()=>{s({edit_id:e}),t==null||t()},children:a.jsx("span",{className:"capitalize w-full justify-start flex",children:"View"})})})};export{J as A,X as a,T as b,U as s};
//# sourceMappingURL=AchView-DIin4I8N.js.map
