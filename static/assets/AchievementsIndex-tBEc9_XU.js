const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/AchMobile-CEBpt8ic.js","assets/index-Cx9aHWms.js","assets/antd-bK47dtYc.js","assets/react-day-picker-BMg2DGmo.js","assets/index-DY_qxQT6.css","assets/AchView-DIin4I8N.js","assets/ProtectedRoutes-BInEfiaw.js","assets/formik.esm-ADxEa5mi.js","assets/cn-Bz47sbbS.js","assets/formik-CkMvMzHs.css","assets/useMatchMedia.hook-CVR6FWmx.js","assets/useMutation-D6aZmw1J.js","assets/ProtectedRoutes-Dix7VhZk.css","assets/IconNew-BhAnMb5r.js","assets/XTooltip-Bdc9vu0b.js","assets/achResponseFr-DHzlt_Pk.js","assets/AchToggleEdit-D8Nqb8YI.js","assets/date.helpers-BWySBUrV.js","assets/IconHeart-CwlJhkiG.js","assets/provider-CFg4W0mD.js","assets/IconEye-DfyAN8Gq.js","assets/AchView-CKdOq0wu.css","assets/XMobileMenu-BWyIqEbF.js","assets/AchDefault-BqLejKQY.js","assets/AchEditorDialog-CiRge0vR.js"])))=>i.map(i=>d[i]);
import{aF as _,_ as p,j as e,u as k,M as f,Q as z,o as I,ap as E,aG as C,R as M,a as g,N as P}from"./index-Cx9aHWms.js";import{u as R,a as L,F as O,I as m,b as y,h as N,X as $,c as X,d,M as q}from"./ProtectedRoutes-BInEfiaw.js";import{r as l,e as Q}from"./antd-bK47dtYc.js";import{c as A}from"./date.helpers-BWySBUrV.js";import"./achResponseFr-DHzlt_Pk.js";import{h as w}from"./react-day-picker-BMg2DGmo.js";import{I as T}from"./IsLoading-DkFGnnOj.js";import{d as V}from"./debounce-CqMFxJgi.js";import{u as B}from"./useFetchAchs-BVDUmuQy.js";import{u as W,d as G,i as H,a as K,c as U,f as J,I as F,e as Y}from"./IconSearch-CPJHC6Kt.js";import{u as Z}from"./useMatchMedia.hook-CVR6FWmx.js";import{a as S,I as ee}from"./IconNew-BhAnMb5r.js";import{S as x,X as te}from"./formik.esm-ADxEa5mi.js";import{c as se}from"./cn-Bz47sbbS.js";import{u as ae,A as ie,a as re}from"./provider-CFg4W0mD.js";import"./useMutation-D6aZmw1J.js";import"./IconInfiniteLoading-BhfJWl73.js";const ce=t=>({timeFrame:_(R(t.map(i=>i.created_at&&w(A(i.created_at),"yyyy")))),filteredAchievements:i=>t.filter(r=>r.created_at&&w(A(r.created_at),"yyyy")===i)}),ne=l.lazy(()=>p(()=>import("./AchMobile-CEBpt8ic.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22]))),le=l.lazy(()=>p(()=>import("./AchDefault-BqLejKQY.js"),__vite__mapDeps([23,1,2,3,4,6,7,8,9,10,11,12,5,13,14,15,16,17,18,19,20,21]))),oe=({ach:t,isMobile:s})=>s?e.jsx(l.Suspense,{fallback:null,children:e.jsx(ne,{ach:t})}):e.jsx(l.Suspense,{fallback:null,children:e.jsx(le,{ach:t})}),b=()=>{const t=k(),s=["useAchFilter$"],{data:a}=L({queryKey:s,staleTime:1/0,refetchOnWindowFocus:!1,refetchOnMount:!1,initialData:{searchInput:"",serverSearchInput:""}}),i=l.useMemo(()=>V(n=>{t.setQueryData(s,{...a,serverSearchInput:n.target.value,searchInput:n.target.value})},1e3),[]),r=n=>{t.setQueryData(s,{...a,searchInput:n.target.value}),i(n)},c=a.serverSearchInput,o=a.searchInput;return{store:a,serverSearchInput:c,onChange:r,onChangeServerSearchInput:i,searchInput:o}},he=()=>{var h;const{serverSearchInput:t}=b(),a=(h=f().state)==null?void 0:h.filter,{id:i}=z(),{achs:r,fetchNextPage:c,hasNextPage:o,isLoading:n,isFetchingNextPage:u}=B({serverSearchInput:t,limit:20,userId:i,queryFilter:a});return{achs:r,fetchNextPage:c,hasNextPage:o,isLoading:n,isFetchingNextPage:u}},xe=I(()=>{const{isLoading:t,achs:s,hasNextPage:a,fetchNextPage:i}=he(),{timeFrame:r,filteredAchievements:c}=ce(s),{ref:o,inView:n}=W(),{isMobile:u}=Z(["isMobile"]);return l.useEffect(()=>{n&&a&&i()},[n,a]),e.jsxs("div",{className:"flex flex-col gap-5 w-full justify-center mx-auto relative",children:[r.map(h=>{const v=c(h);return v.length?e.jsxs(Q.Fragment,{children:[e.jsx("div",{children:h&&e.jsx(O,{title:h})}),e.jsx("div",{className:"flex flex-wrap gap-5 md:gap-2 items-center",children:v.map(j=>e.jsx(oe,{ach:j,isMobile:u},j.id))})]},h):null}),e.jsx("div",{ref:o,className:"flex relative w-full min-h-[100px] justify-center",children:e.jsx(T,{isLoading:t})})]})}),D=()=>{var n;const s=(n=f().state)==null?void 0:n.filter,a=G(s),i=H(s),r=K(s),c=U(s),o=J(s);return{paramFilter:s,isAll:a,isActive:i,isFavorite:r,isDeleted:c,isArchived:o}},de=()=>{const{isAll:t,isActive:s,isFavorite:a,isDeleted:i,isArchived:r}=D();let c=e.jsx(m,{width:24,height:24,className:"min-h-[24px] min-w-[24px]"});return t&&(c=e.jsx(F,{width:24,height:24,className:"min-h-[24px] min-w-[24px] text-sky-400"})),s&&(c=e.jsx(m,{width:24,height:24,className:"min-h-[24px] min-w-[24px]"})),a&&(c=e.jsx(y,{width:24,height:24,className:"min-h-[24px] min-w-[24px] text-rose-600"})),i&&(c=e.jsx(S,{width:24,height:24,className:"min-h-[24px] min-w-[24px] text-slate-600"})),r&&(c=e.jsx(N,{width:24,height:24,className:"min-h-[24px] min-w-[24px] text-violet-600"})),c},ue=I(()=>{const{isAll:t,isFavorite:s,isDeleted:a,isArchived:i}=D();return e.jsx(x,{startIcon:e.jsx(de,{}),className:se("!border-blue-600 hover:!bg-blue-600/20",t&&"!border-sky-400/20 hover:!bg-sky-400/20",s&&"!border-rose-500/20 hover:!bg-rose-500/20",i&&"!border-violet-500/20 hover:!bg-violet-500/20",a&&"!border-slate-500/20 hover:!bg-slate-500/20"),variant:"outlined"})}),me=()=>{const[t,s]=l.useState(!1),a=E(),i=r=>{a({pathname:"/achievements/filtered-achievements",search:`?filter=${r}`},{state:{filter:r}}),s(!1)};return e.jsx($,{onOpenChange:r=>{s(r)},trigger:["hover"],open:t,dropdownRender:()=>e.jsx(pe,{onClose:i}),placement:"bottomRight",overlayClassName:"!z-[55]",children:e.jsx("div",{children:e.jsx(ue,{})})})},pe=({onClose:t})=>e.jsxs(X,{children:[e.jsx(d,{onClick:()=>{t("active")},children:e.jsx(x,{variant:"text",size:"small",startIcon:e.jsx(m,{className:"text-blue-500",width:24,height:24}),children:e.jsx("span",{className:"flex w-[110px] justify-start capitalize text-blue-500",children:"Active"})})}),e.jsx(d,{onClick:()=>{t("favorite")},children:e.jsx(x,{variant:"text",size:"small",startIcon:e.jsx(y,{className:"text-rose-500",width:24,height:24}),children:e.jsx("span",{className:"flex w-[110px] justify-start capitalize text-rose-500",children:"Favorite"})})}),e.jsx(d,{onClick:()=>{t("archived")},children:e.jsx(x,{variant:"text",size:"small",startIcon:e.jsx(N,{className:"text-violet-500",width:24,height:24}),children:e.jsx("span",{className:"flex w-[110px] justify-start capitalize text-violet-500",children:"Archived"})})}),e.jsx(d,{onClick:()=>{t("deleted")},children:e.jsx(x,{variant:"text",size:"small",startIcon:e.jsx(S,{className:"text-slate-500",width:24,height:24}),children:e.jsx("span",{className:"flex w-[110px] justify-start capitalize text-slate-500",children:"Deleted"})})}),e.jsx(d,{onClick:()=>{t(C.all)},children:e.jsx(x,{variant:"text",size:"small",startIcon:e.jsx(F,{className:"text-sky-400",width:26,height:26}),children:e.jsx("span",{className:"flex w-[110px] justify-start capitalize text-sky-400",children:"All"})})})]}),fe=()=>{const{onChangeField:t}=ae(),s=()=>{t("open",!0)};return e.jsx("div",{className:"opacity-70",children:e.jsx(x,{startIcon:e.jsx(ee,{width:24,height:24}),onClick:s,variant:"text",children:"Add achievement"})})},ve=()=>{const{store:t,onChange:s,onChangeServerSearchInput:a}=b();return l.useEffect(()=>()=>{a.cancel()},[]),e.jsx(te,{type:"text",autoFocus:!1,value:t.searchInput,onChange:s,startIcon:e.jsx(Y,{className:"text-slate-500/50",width:20,height:20}),placeholder:"Search",width:"!max-w-[600px] !w-full"})},je=()=>e.jsx("div",{className:"flex w-full mx-auto gap-8",children:e.jsxs("div",{className:"flex flex-col w-full gap-4",children:[e.jsx(fe,{}),e.jsxs("div",{className:"flex w-full items-center justify-end gap-2",children:[e.jsx(ve,{}),e.jsx("div",{className:"flex gap-2 w-[108px]",children:e.jsx(me,{})})]})]})}),ge=l.lazy(()=>p(()=>import("./AchEditorDialog-CiRge0vR.js"),__vite__mapDeps([24,1,2,3,4,6,7,8,9,10,11,12,19]))),Ae=()=>{var a;const s=(a=f().state)==null?void 0:a.filter;return e.jsx(q,{children:e.jsx("div",{className:"flex flex-col gap-10 w-full max-w-[600px] mx-auto relative",children:e.jsxs(ie,{store:re,children:[e.jsxs(l.Suspense,{fallback:null,children:[e.jsx(je,{}),e.jsx(ge,{})]}),e.jsx(xe,{},s)]})})})},Oe=()=>e.jsxs(M,{children:[e.jsx(g,{path:"/",element:e.jsx(P,{to:"/achievements/filtered-achievements?filter=active",state:{filter:"active"}})}),e.jsx(g,{path:"filtered-achievements",element:e.jsx(Ae,{})})]});export{Oe as default};
//# sourceMappingURL=AchievementsIndex-tBEc9_XU.js.map
